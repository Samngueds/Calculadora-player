# .github/workflows/release.yml
name: Build Calculadora Plus by samns

on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: windows-latest
    
    steps:
    - uses: actions/checkout@v2
    
    - name: Setup .NET
      uses: actions/setup-dotnet@v1
      with:
        dotnet-version: 8.0.x
    
    - name: Build
      run: |
        dotnet publish -c Release -r win-x86 --self-contained true /p:PublishSingleFile=true
        dotnet publish -c Release -r win-x64 --self-contained true /p:PublishSingleFile=true
    
    - name: Prepare Release
      run: |
        mkdir release
        mkdir release\Music
        copy "bin\Release\net8.0\win-x86\publish\*.exe" "release\Calculadora-Plus-samns-x86.exe"
        copy "bin\Release\net8.0\win-x64\publish\*.exe" "release\Calculadora-Plus-samns-x64.exe"
        
        echo @echo off > release\Iniciar-Calculadora-Plus.bat
        echo if "%%PROCESSOR_ARCHITECTURE%%"=="AMD64" ( >> release\Iniciar-Calculadora-Plus.bat)
        echo     start "" "Calculadora-Plus-samns-x64.exe" >> release\Iniciar-Calculadora-Plus.bat
        echo  else ( >> release\Iniciar-Calculadora-Plus.bat)
        echo     start "" "Calculadora-Plus-samns-x86.exe" >> release\Iniciar-Calculadora-Plus.bat
        echo  >> release\Iniciar-Calculadora-Plus.bat
    
    - name: Create Release
      uses: softprops/action-gh-release@v1
      with:
        tag_name: v${{ github.run_number }}
        name: ğŸµ Calculadora Plus by samns v${{ github.run_number }}
        body: |
          # ğŸ® Calculadora Plus by samns

          Uma calculadora moderna com interface colorida e player de mÃºsica integrado!

          ## âœ¨ Funcionalidades

          ### ğŸ§® Calculadora
          - â• AdiÃ§Ã£o
          - â– SubtraÃ§Ã£o
          - âœ–ï¸ MultiplicaÃ§Ã£o
          - â— DivisÃ£o
          - ğŸ¨ Interface colorida com ASCII art
          - âš¡ ValidaÃ§Ã£o avanÃ§ada de entrada
          
          ### ğŸµ Player de MÃºsica
          - ğŸ¼ ReproduÃ§Ã£o de arquivos MP3
          - ğŸ“ Gerenciamento automÃ¡tico da pasta Music
          - â¯ï¸ Controles de reproduÃ§Ã£o
          - ğŸ“ Lista de mÃºsicas dinÃ¢mica

          ## ğŸ’» Requisitos
          - Windows 32-bit (x86) ou 64-bit (x64)
          - Arquivos MP3 para o player de mÃºsica

          ## ğŸ“¥ InstalaÃ§Ã£o
          1. Baixe o arquivo "Iniciar-Calculadora-Plus.bat"
          2. Execute o arquivo baixado
          3. Para usar o player de mÃºsica:
             - Adicione seus arquivos MP3 na pasta "Music"
             - Selecione a opÃ§Ã£o 6 no menu principal

          ## ğŸ“¦ Arquivos IncluÃ­dos
          - `Calculadora-Plus-samns-x64.exe` - VersÃ£o 64-bit
          - `Calculadora-Plus-samns-x86.exe` - VersÃ£o 32-bit
          - `Iniciar-Calculadora-Plus.bat` - Inicializador automÃ¡tico
          - `Music/` - Pasta para seus arquivos MP3

          ## ğŸ” CaracterÃ­sticas TÃ©cnicas
          - Interface colorida usando Colorful.Console
          - Player de mÃºsica usando NAudio
          - Menu interativo com ASCII art
          - Tratamento avanÃ§ado de erros
          - Estrutura de cÃ³digo organizada

          ## ğŸ†• O que hÃ¡ de novo
          - Interface totalmente colorida
          - Player de mÃºsica integrado
          - Melhor tratamento de erros
          - Suporte a nÃºmeros decimais
          - ASCII art personalizado
          
          ## ğŸ‘¨â€ğŸ’» Desenvolvido por
          samns

          ## ğŸ¯ PrÃ³ximas AtualizaÃ§Ãµes
          - [ ] EqualizaÃ§Ã£o de Ã¡udio
          - [ ] Mais operaÃ§Ãµes matemÃ¡ticas
          - [ ] HistÃ³rico de cÃ¡lculos
          - [ ] Playlist de mÃºsicas
          
          ## ğŸ“¢ Feedback
          Encontrou algum problema ou tem sugestÃµes?
          Abra uma issue no GitHub!
          
          ---
          *VersÃ£o gerada automaticamente pelo GitHub Actions em ${{ github.event.head_commit.timestamp }}*
        files: release/*
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
