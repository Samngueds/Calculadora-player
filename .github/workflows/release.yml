# .github/workflows/release.yml
name: Build Calculadora Plus by samns

on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: windows-latest
    
    steps:
    - uses: actions/checkout@v2
    
    - name: Setup .NET
      uses: actions/setup-dotnet@v1
      with:
        dotnet-version: 8.0.x
    
    - name: Build
      run: |
        dotnet publish -c Release -r win-x86 --self-contained true /p:PublishSingleFile=true
        dotnet publish -c Release -r win-x64 --self-contained true /p:PublishSingleFile=true
    
    - name: Prepare Release
      run: |
        mkdir release
        mkdir release\Music
        copy "bin\Release\net8.0\win-x86\publish\*.exe" "release\Calculadora-Plus-samns-x86.exe"
        copy "bin\Release\net8.0\win-x64\publish\*.exe" "release\Calculadora-Plus-samns-x64.exe"
        
        echo @echo off > release\Iniciar-Calculadora-Plus.bat
        echo if "%%PROCESSOR_ARCHITECTURE%%"=="AMD64" ( >> release\Iniciar-Calculadora-Plus.bat)
        echo     start "" "Calculadora-Plus-samns-x64.exe" >> release\Iniciar-Calculadora-Plus.bat
        echo  else ( >> release\Iniciar-Calculadora-Plus.bat)
        echo     start "" "Calculadora-Plus-samns-x86.exe" >> release\Iniciar-Calculadora-Plus.bat
        echo  >> release\Iniciar-Calculadora-Plus.bat
    
    - name: Create Release
      uses: softprops/action-gh-release@v1
      with:
        tag_name: v${{ github.run_number }}
        name: 🎵 Calculadora Plus by samns v${{ github.run_number }}
        body: |
          # 🎮 Calculadora Plus by samns

          Uma calculadora moderna com interface colorida e player de música integrado!

          ## ✨ Funcionalidades

          ### 🧮 Calculadora
          - ➕ Adição
          - ➖ Subtração
          - ✖️ Multiplicação
          - ➗ Divisão
          - 🎨 Interface colorida com ASCII art
          - ⚡ Validação avançada de entrada
          
          ### 🎵 Player de Música
          - 🎼 Reprodução de arquivos MP3
          - 📁 Gerenciamento automático da pasta Music
          - ⏯️ Controles de reprodução
          - 📝 Lista de músicas dinâmica

          ## 💻 Requisitos
          - Windows 32-bit (x86) ou 64-bit (x64)
          - Arquivos MP3 para o player de música

          ## 📥 Instalação
          1. Baixe o arquivo "Iniciar-Calculadora-Plus.bat"
          2. Execute o arquivo baixado
          3. Para usar o player de música:
             - Adicione seus arquivos MP3 na pasta "Music"
             - Selecione a opção 6 no menu principal

          ## 📦 Arquivos Incluídos
          - `Calculadora-Plus-samns-x64.exe` - Versão 64-bit
          - `Calculadora-Plus-samns-x86.exe` - Versão 32-bit
          - `Iniciar-Calculadora-Plus.bat` - Inicializador automático
          - `Music/` - Pasta para seus arquivos MP3

          ## 🔍 Características Técnicas
          - Interface colorida usando Colorful.Console
          - Player de música usando NAudio
          - Menu interativo com ASCII art
          - Tratamento avançado de erros
          - Estrutura de código organizada

          ## 🆕 O que há de novo
          - Interface totalmente colorida
          - Player de música integrado
          - Melhor tratamento de erros
          - Suporte a números decimais
          - ASCII art personalizado
          
          ## 👨‍💻 Desenvolvido por
          samns

          ## 🎯 Próximas Atualizações
          - [ ] Equalização de áudio
          - [ ] Mais operações matemáticas
          - [ ] Histórico de cálculos
          - [ ] Playlist de músicas
          
          ## 📢 Feedback
          Encontrou algum problema ou tem sugestões?
          Abra uma issue no GitHub!
          
          ---
          *Versão gerada automaticamente pelo GitHub Actions em ${{ github.event.head_commit.timestamp }}*
        files: release/*
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
